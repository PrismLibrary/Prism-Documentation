<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Event Aggregator | Prism </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Event Aggregator | Prism ">
    <meta name="generator" content="docfx 2.56.7.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/affix.css">
    <meta property="docfx:navrel" content="../toc">
    <meta property="docfx:tocrel" content="toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/prism-logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                <ul class="nav level1 navbar-nav">
                  <li class="">
                    <a href="//prismlibrary.com/" title="Home" class="">Home</a>
                  </li>
                  <li class="active">
                    <a href="../docs/index.html" title="Documentation" class="active">Documentation</a>
                  </li>
                </ul>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="">
                      <a href="index.html" title="Introduction" class="">Introduction</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Commands</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="commands/commanding.html" title="Commanding" class="">Commanding</a>
                          </li>
                          <li class="">
                            <a href="commands/composite-commands.html" title="Composite Commands" class="">Composite Commands</a>
                          </li>
                          <li class="">
                            <a href="commands/async-commands.html" title="Async Commands" class="">Async Commands</a>
                          </li>
                          <li class="">
                            <a href="commands/error-handling.html" title="Error Handling" class="">Error Handling</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Dependency Injection</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="dependency-injection/index.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="dependency-injection/registering-types.html" title="Registering Types" class="">Registering Types</a>
                          </li>
                          <li class="">
                            <a href="dependency-injection/servicecollection-supplement.html" title="Microsoft Extensions (Supplement)" class="">Microsoft Extensions (Supplement)</a>
                          </li>
                          <li class="">
                            <a href="dependency-injection/platform-specific-services.html" title="Platform Specific Services" class="">Platform Specific Services</a>
                          </li>
                          <li class="">
                            <a href="dependency-injection/resolution-errors.html" title="Exception Handling" class="">Exception Handling</a>
                          </li>
                          <li class="">
                            <a href="dependency-injection/container-locator.html" title="ContainerLocator" class="">ContainerLocator</a>
                          </li>
                          <li class="">
                            <a href="dependency-injection/appendix.html" title="Appendix" class="">Appendix</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Dialog Service</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="dialogs/index.html" title="Dialog Service" class="">Dialog Service</a>
                          </li>
                          <li class="">
                            <a href="dialogs/dialog-aware.html" title="IDialogAware ViewModels" class="">IDialogAware ViewModels</a>
                          </li>
                          <li class="">
                            <a href="dialogs/dialog-window.html" title="IDialogWindow (WPF &amp; Uno Platform)" class="">IDialogWindow (WPF &amp; Uno Platform)</a>
                          </li>
                        </ul>  </li>
                    <li class="active">
                      <a href="event-aggregator.html" title="Event Aggregator" class="active">Event Aggregator</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Mvvm</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="mvvm/bindablebase.html" title="BindableBase" class="">BindableBase</a>
                          </li>
                          <li class="">
                            <a href="mvvm/viewmodel-locator.html" title="ViewModelLocator" class="">ViewModelLocator</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Modularity</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="modularity/index.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="modularity/module-catalog.html" title="Module Catalog" class="">Module Catalog</a>
                          </li>
                          <li class="">
                            <a href="modularity/module-initialization.html" title="Module Initialization" class="">Module Initialization</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Navigation</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="navigation/index.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                          <li class="">
                            <a href="navigation/navigation-parameters.html" title="INavigationParameters" class="">INavigationParameters</a>
                          </li>
                          <li class="">
                            <a href="navigation/page-navigation.html" title="Page Navigation" class="">Page Navigation</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Regions</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="navigation/regions/index.html" title="Getting Started" class="">Getting Started</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/region-manager.html" title="Region Manager" class="">Region Manager</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/region-adapters.html" title="Region Adapters" class="">Region Adapters</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/region-behaviors.html" title="Region Behaviors" class="">Region Behaviors</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/index.html" title="About Navigation in Prism" class="">About Navigation in Prism</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/basic-region-navigation.html" title="Basic Region Navigation" class="">Basic Region Navigation</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/view-viewmodel-participation.html" title="View/ViewModel Participation" class="">View/ViewModel Participation</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/navigation-existing-views.html" title="Navigating to Existing Views" class="">Navigating to Existing Views</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/passing-parameters.html" title="Passing Parameters" class="">Passing Parameters</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/confirming-navigation.html" title="Confirming Navigation" class="">Confirming Navigation</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/controlling-view-lifetime.html" title="Controlling View Lifetime" class="">Controlling View Lifetime</a>
                                </li>
                                <li class="">
                                  <a href="navigation/regions/navigation-journal.html" title="Navigation Journal" class="">Navigation Journal</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Platforms</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Maui</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="platforms/maui/index.html" title="Getting Started" class="">Getting Started</a>
                                </li>
                                <li class="">
                                  <a href="platforms/maui/migrating.html" title="Migrating from Prism.Forms" class="">Migrating from Prism.Forms</a>
                                </li>
                                <li class="">
                                  <a href="platforms/maui/appbuilder.html" title="PrismAppBuilder" class="">PrismAppBuilder</a>
                                </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a class="">AppModel</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="platforms/maui/appmodel/pagelifecycleaware.html" title="IPageLifecycleAware" class="">IPageLifecycleAware</a>
                                      </li>
                                    </ul>  </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a class="">Behaviors</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="platforms/maui/behaviors/index.html" title="Introduction" class="">Introduction</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/behaviors/behaviorbase.html" title="BehaviorBase&lt;T&gt;" class="">BehaviorBase&lt;T&gt;</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/behaviors/eventtocommandbehavior.html" title="EventToCommandBehavior" class="">EventToCommandBehavior</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/behaviors/pagebehaviorfactory.html" title="PageBehaviorFactory" class="">PageBehaviorFactory</a>
                                      </li>
                                    </ul>  </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a class="">Dialogs</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="platforms/maui/dialogs/index.html" title="Getting Started" class="">Getting Started</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/dialogs/pagedialogs.html" title="IPageDialogService" class="">IPageDialogService</a>
                                      </li>
                                    </ul>  </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a class="">Navigation</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="platforms/maui/navigation/index.html" title="Introduction" class="">Introduction</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/navigation/page-navigation.html" title="Page Navigation" class="">Page Navigation</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/navigation/navigation-builder.html" title="NavigationBuilder" class="">NavigationBuilder</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/navigation/tabbed-navigation.html" title="TabbedPages" class="">TabbedPages</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/navigation/navigation-result.html" title="Understanding the INavigationResult" class="">Understanding the INavigationResult</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/navigation/navigation-exceptions.html" title="NavigationExceptions" class="">NavigationExceptions</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/navigation/global-navigation-observer.html" title="Global Navigation Observer" class="">Global Navigation Observer</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/maui/navigation/xaml-navigation.html" title="XAML Navigation" class="">XAML Navigation</a>
                                      </li>
                                    </ul>  </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Uno Platform</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="platforms/uno/index.html" title="Getting Started" class="">Getting Started</a>
                                </li>
                                <li class="">
                                  <a href="platforms/uno/extensions.html" title="Uno.Extensions" class="">Uno.Extensions</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Wpf</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="platforms/wpf/introduction.html" title="Introduction" class="">Introduction</a>
                                </li>
                                <li class="">
                                  <a href="platforms/wpf/getting-started.html" title="Getting Started" class="">Getting Started</a>
                                </li>
                                <li class="">
                                  <a href="platforms/wpf/view-composition.html" title="View Composition" class="">View Composition</a>
                                </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a class="">Interactivity</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="platforms/wpf/interactivity/event-to-command.html" title="Event To Command" class="">Event To Command</a>
                                      </li>
                                    </ul>  </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Xamarin.Forms</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="platforms/xamarin-forms/creating-your-first-prism-app.html" title="Create Your First App" class="">Create Your First App</a>
                                </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a class="">Behaviors</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="platforms/xamarin-forms/behaviors/index.html" title="Working with Behaviors" class="">Working with Behaviors</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/behaviors/eventtocommandbehavior.html" title="EventToCommand Behavior" class="">EventToCommand Behavior</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/behaviors/page-behavior-factory.html" title="PageBehaviorFactory" class="">PageBehaviorFactory</a>
                                      </li>
                                    </ul>  </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a class="">Dialogs</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="platforms/xamarin-forms/dialogs/index.html" title="Dialogs" class="">Dialogs</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/dialogs/page-dialog-service.html" title="Page Dialog Service" class="">Page Dialog Service</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/dialogs/dialog-service.html" title="Dialog Service" class="">Dialog Service</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/dialogs/styling-dialogs.html" title="Styling Dialogs" class="">Styling Dialogs</a>
                                      </li>
                                    </ul>  </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a class="">Navigation</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="platforms/xamarin-forms/navigation/navigation-basics.html" title="Navigation Basics" class="">Navigation Basics</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/navigation/passing-parameters.html" title="Passing Parameters" class="">Passing Parameters</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/navigation/confirming-navigation.html" title="Confirming Navigation" class="">Confirming Navigation</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/navigation/deep-linking.html" title="Deep Linking" class="">Deep Linking</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/navigation/working-with-masterdetailpages.html" title="Working w/ MasterDetailPages" class="">Working w/ MasterDetailPages</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/navigation/working-with-navigationpages.html" title="Working w/ NavigationPages" class="">Working w/ NavigationPages</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/navigation/working-with-tabbedpages.html" title="Working w/ TabbedPages" class="">Working w/ TabbedPages</a>
                                      </li>
                                      <li class="">
                                        <a href="platforms/xamarin-forms/navigation/xaml-navigation.html" title="XAML Navigation" class="">XAML Navigation</a>
                                      </li>
                                    </ul>  </li>
                                <li class="">
                                  <a href="platforms/xamarin-forms/application-lifecycle.html" title="Application Lifecycle" class="">Application Lifecycle</a>
                                </li>
                                <li class="">
                                  <a href="platforms/xamarin-forms/page-lifecycle.html" title="Page Lifecycle" class="">Page Lifecycle</a>
                                </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a class="">Additional Platforms</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="platforms/xamarin-forms/platform-reference/gtk.html" title="GTK" class="">GTK</a>
                                      </li>
                                    </ul>  </li>
                              </ul>  </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Magician</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="magician/index.html" title="Getting Started" class="">Getting Started</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a class="">Plugins</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Essentials</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="plugins/essentials/index.html" title="Getting Started" class="">Getting Started</a>
                                </li>
                                <li class="">
                                  <a href="plugins/essentials/appcontext.html" title="App Context" class="">App Context</a>
                                </li>
                                <li class="">
                                  <a href="plugins/essentials/connectivity.html" title="Connectivity" class="">Connectivity</a>
                                </li>
                                <li class="">
                                  <a href="plugins/essentials/filesystem.html" title="File System" class="">File System</a>
                                </li>
                                <li class="">
                                  <a href="plugins/essentials/mainthread.html" title="Main Thread" class="">Main Thread</a>
                                </li>
                                <li class="">
                                  <a href="plugins/essentials/stores.html" title="Stores" class="">Stores</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a class="">Logging</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="plugins/logging/index.html" title="Getting Started" class="">Getting Started</a>
                                </li>
                                <li class="">
                                  <a href="plugins/logging/gelf.html" title="Graylog" class="">Graylog</a>
                                </li>
                                <li class="">
                                  <a href="plugins/logging/microsoft.html" title="Microsoft Extensions" class="">Microsoft Extensions</a>
                                </li>
                                <li class="">
                                  <a href="plugins/logging/raygun.html" title="Raygun" class="">Raygun</a>
                                </li>
                                <li class="">
                                  <a href="plugins/logging/testing.html" title="Unit Testing" class="">Unit Testing</a>
                                </li>
                              </ul>  </li>
                          <li class="">
                            <a href="plugins/regions.html" title="Observable Regions" class="">Observable Regions</a>
                          </li>
                          <li class="">
                            <a href="plugins/popups.html" title="Popups" class="">Popups</a>
                          </li>
                        </ul>  </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Events.EventAggregator">
<h1 id="event-aggregator">Event Aggregator</h1>

<p>The Prism Library provides an event mechanism that enables communications between loosely coupled components in the application. This mechanism, based on the event aggregator service, allows publishers and subscribers to communicate through events and still do not have a direct reference to each other.</p>
<p>The <code>EventAggregator</code> provides multicast publish/subscribe functionality. This means there can be multiple publishers that raise the same event and there can be multiple subscribers listening to the same event. Consider using the <code>EventAggregator</code> to publish an event across modules and when sending a message between business logic code, such as controllers and presenters.</p>
<p>Events created with the Prism Library are typed events. This means you can take advantage of compile-time type checking to detect errors before you run the application. In the Prism Library, the <code>EventAggregator</code> allows subscribers or publishers to locate a specific <code>EventBase</code>. The event aggregator also allows for multiple publishers and multiple subscribers, as shown in the following illustration.</p>
<p><img src="images/event-aggregator-1.png" alt="Using the event aggregator"></p>
<div class="embeddedvideo"><iframe src="https://www.youtube.com/embed/xTP9_hN_3xA" frameborder="0" allowfullscreen="true"></iframe></div>
<h2 id="ieventaggregator">IEventAggregator</h2>
<p>The <code>EventAggregator</code> class is offered as a service in the container and can be retrieved through the <code>IEventAggregator</code> interface. The event aggregator is responsible for locating or building events and for keeping a collection of the events in the system.</p>
<pre><code class="lang-cs">public interface IEventAggregator
{
    TEventType GetEvent&lt;TEventType&gt;() where TEventType : EventBase;
}
</code></pre><p>The <code>EventAggregator</code> constructs the event on its first access if it has not already been constructed. This relieves the publisher or subscriber from needing to determine whether the event is available.</p>
<h2 id="pubsubevent">PubSubEvent</h2>
<p>The real work of connecting publishers and subscribers is done by the <code>PubSubEvent</code> class. This is the only implementation of the <code>EventBase</code> class that is included in the Prism Library. This class maintains the list of subscribers and handles event dispatching to the subscribers.</p>
<p>The <code>PubSubEvent</code> class is a generic class that requires the payload type to be defined as the generic type. This helps enforce, at compile time, that publishers and subscribers provide the correct methods for successful event connection. The following code shows a partial definition of the PubSubEvent class.</p>
<div class="NOTE"><h5>Note</h5><p><code>PubSubEvent</code> can be found in the Prism.Events namespace which is located in the Prism.Core NuGet package.</p>
</div>
<h2 id="creating-an-event">Creating an Event</h2>
<p>The <code>PubSubEvent&lt;TPayload&gt;</code> is intended to be the base class for an application&#39;s or module&#39;s specific events. <code>TPayLoad</code> is the type of the event&#39;s payload. The payload is the argument that will be passed to subscribers when the event is published.</p>
<p>For example, the following code shows the <code>TickerSymbolSelectedEvent</code>. The payload is a string containing the company symbol. Notice how the implementation for this class is empty.</p>
<pre><code class="lang-cs">public class TickerSymbolSelectedEvent : PubSubEvent&lt;string&gt;{}
</code></pre><div class="NOTE"><h5>Note</h5><p>In a composite application, the events are frequently shared between multiple modules, so they are defined in a common place. It is common practice to define these events in a shared assembly such as a &quot;Core&quot; or &quot;Infrastructure&quot; project.</p>
</div>
<h2 id="publishing-an-event">Publishing an Event</h2>
<p>Publishers raise an event by retrieving the event from the <code>EventAggregator</code> and calling the <code>Publish</code> method. To access the <code>EventAggregator</code>, you can use dependency injection by adding a parameter of type <code>IEventAggregator</code> to the class constructor.</p>
<pre><code class="lang-cs">public class MainPageViewModel
{
    IEventAggregator _eventAggregator;
    public MainPageViewModel(IEventAggregator ea)
    {
        _eventAggregator = ea;
    }
}
</code></pre><p>The following code demonstrates publishing the TickerSymbolSelectedEvent.</p>
<pre><code class="lang-cs">_eventAggregator.GetEvent&lt;TickerSymbolSelectedEvent&gt;().Publish(&quot;STOCK0&quot;);
</code></pre><h2 id="subscribing-to-events">Subscribing to Events</h2>
<p>Subscribers can enlist with an event using one of the <code>Subscribe</code> method overloads available on the <code>PubSubEvent</code> class.</p>
<pre><code class="lang-cs">public class MainPageViewModel
{
    public MainPageViewModel(IEventAggregator ea)
    {
        ea.GetEvent&lt;TickerSymbolSelectedEvent&gt;().Subscribe(ShowNews);
    }

    void ShowNews(string companySymbol)
    {
        //implement logic
    }
}
</code></pre><p>There are several ways to subscribe to <code>PubSubEvents</code>. Use the following criteria to help determine which option best suits your needs:</p>
<ul>
<li>If you need to be able to update UI elements when an event is received, subscribe to receive the event on the UI thread.</li>
<li>If you need to filter an event, provide a filter delegate when subscribing.</li>
<li>If you have performance concerns with events, consider using strongly referenced delegates when subscribing and then manually unsubscribe from the PubSubEvent.</li>
<li>If none of the preceding is applicable, use a default subscription.</li>
</ul>
<p>The following sections describe these options.</p>
<h3 id="subscribing-on-the-ui-thread">Subscribing on the UI Thread</h3>
<p>Frequently, subscribers will need to update UI elements in response to events. In WPF, only a UI thread can update UI elements.</p>
<p>By default, the subscriber receives the event on the publisher&#39;s thread. If the publisher sends the event from the UI thread, the subscriber can update the UI. However, if the publisher&#39;s thread is a background thread, the subscriber may be unable to directly update UI elements. In this case, the subscriber would need to schedule the updates on the UI thread using the Dispatcher class.</p>
<p>The <code>PubSubEvent</code> provided with the Prism Library can assist by allowing the subscriber to automatically receive the event on the UI thread. The subscriber indicates this during subscription, as shown in the following code example.</p>
<pre><code class="lang-cs">public class MainPageViewModel
{
    public MainPageViewModel(IEventAggregator ea)
    {
        ea.GetEvent&lt;TickerSymbolSelectedEvent&gt;().Subscribe(ShowNews, ThreadOption.UIThread);
    }

    void ShowNews(string companySymbol)
    {
        //implement logic
    }
}
</code></pre><p>The following options are available for <code>ThreadOption</code>:</p>
<ul>
<li><code>PublisherThread</code>: Use this setting to receive the event on the publishers&#39; thread. This is the default setting.</li>
<li><code>BackgroundThread</code>: Use this setting to asynchronously receive the event on a .NET Framework thread-pool thread.</li>
<li><code>UIThread</code>: Use this setting to receive the event on the UI thread.</li>
</ul>
<div class="NOTE"><h5>Note</h5><p>In order for <code>PubSubEvent</code> to publish to subscribers on the UI thread, the <code>EventAggregator</code> must initially be constructed on the UI thread.</p>
</div>
<h3 id="subscription-filtering">Subscription Filtering</h3>
<p>Subscribers may not need to handle every instance of a published event. In these cases, the subscriber can use the filter parameter. The filter parameter is of type <code>System.Predicate&lt;TPayLoad&gt;</code> and is a delegate that gets executed when the event is published to determine if the payload of the published event matches a set of criteria required to have the subscriber callback invoked. If the payload does not meet the specified criteria, the subscriber callback is not executed.</p>
<p>Frequently, this filter is supplied as a lambda expression, as shown in the following code example.</p>
<pre><code class="lang-cs">public class MainPageViewModel
{
    public MainPageViewModel(IEventAggregator ea)
    {
        TickerSymbolSelectedEvent tickerEvent = ea.GetEvent&lt;TickerSymbolSelectedEvent&gt;();
        tickerEvent.Subscribe(ShowNews, ThreadOption.UIThread, false, 
                              companySymbol =&gt; companySymbol == &quot;STOCK0&quot;);
    }

    void ShowNews(string companySymbol)
    {
        //implement logic
    }
}
</code></pre><div class="NOTE"><h5>Note</h5><p>The <code>Subscribe</code> method returns a subscription token of type <code>Prism.Events.SubscriptionToken</code> that can be used to remove a subscription to the event later. This token is particularly useful when you are using anonymous delegates or lambda expressions as the callback delegate or when you are subscribing the same event handler with different filters.</p>
</div>
<div class="NOTE"><h5>Note</h5><p>It is not recommended to modify the payload object from within a callback delegate because several threads could be accessing the payload object simultaneously. You could have the payload be immutable to avoid concurrency errors.</p>
</div>
<h3 id="subscribing-using-strong-references">Subscribing Using Strong References</h3>
<p>If you are raising multiple events in a short period of time and have noticed performance concerns with them, you may need to subscribe with strong delegate references. If you do that, you will then need to manually unsubscribe from the event when disposing the subscriber.</p>
<p>By default, <code>PubSubEvent</code> maintains a weak delegate reference to the subscriber&#39;s handler and filter on subscription. This means the reference that <code>PubSubEvent</code> holds on to will not prevent garbage collection of the subscriber. Using a weak delegate reference relieves the subscriber from the need to unsubscribe and allows for proper garbage collection.</p>
<p>However, maintaining this weak delegate reference is slower than a corresponding strong reference. For most applications, this performance will not be noticeable, but if your application publishes a large number of events in a short period of time, you may need to use strong references with PubSubEvent. If you do use strong delegate references, your subscriber should unsubscribe to enable proper garbage collection of your subscribing object when it is no longer used.</p>
<p>To subscribe with a strong reference, use the <code>keepSubscriberReferenceAlive</code> parameter on the <code>Subscribe</code> method, as shown in the following code example.</p>
<pre><code class="lang-cs">public class MainPageViewModel
{
    public MainPageViewModel(IEventAggregator ea)
    {
        bool keepSubscriberReferenceAlive = true;
        TickerSymbolSelectedEvent tickerEvent = ea.GetEvent&lt;TickerSymbolSelectedEvent&gt;();
        tickerEvent.Subscribe(ShowNews, ThreadOption.UIThread, keepSubscriberReferenceAlive, 
                              companySymbol =&gt; companySymbol == &quot;STOCK0&quot;);
    }

    void ShowNews(string companySymbol)
    {
        //implement logic
    }
}
</code></pre><p>The <code>keepSubscriberReferenceAlive</code> parameter is of type <code>bool</code>:</p>
<ul>
<li>When set to <code>true</code>, the event instance keeps a strong reference to the subscriber instance, thereby not allowing it to get garbage collected. For information about how to unsubscribe, see the section Unsubscribing from an Event later in this topic.</li>
<li>When set to <code>false</code> (the default value when this parameter omitted), the event maintains a weak reference to the subscriber instance, thereby allowing the garbage collector to dispose the subscriber instance when there are no other references to it. When the subscriber instance gets collected, the event is automatically unsubscribed.</li>
</ul>
<h2 id="unsubscribing-from-an-event">Unsubscribing from an Event</h2>
<p>If your subscriber no longer wants to receive events, you can unsubscribe by using your subscriber&#39;s handler or you can unsubscribe by using a subscription token.</p>
<p>The following code example shows how to directly unsubscribe to the handler.</p>
<pre><code class="lang-cs">public class MainPageViewModel
{
    TickerSymbolSelectedEvent _event;
    public MainPageViewModel(IEventAggregator ea)
    {
        _event = ea.GetEvent&lt;TickerSymbolSelectedEvent&gt;();
        _event.Subscribe(ShowNews);
    }

    void Unsubscribe()
    {
        _event.Unsubscribe(ShowNews);
    }

    void ShowNews(string companySymbol)
    {
        //implement logic
    }
}
</code></pre><p>The following code example shows how to unsubscribe with a subscription token. The token is supplied as a return value from the <code>Subscribe</code> method.</p>
<pre><code class="lang-cs">public class MainPageViewModel
{
    TickerSymbolSelectedEvent _event;
    SubscriptionToken _token;
    public MainPageViewModel(IEventAggregator ea)
    {
        _event = ea.GetEvent&lt;TickerSymbolSelectedEvent&gt;();
        _token = _event.Subscribe(ShowNews);
    }

    void Unsubscribe()
    {
        _event.Unsubscribe(_token);
    }

    void ShowNews(string companySymbol)
    {
        //implement logic
    }
}
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix" style="margin-top: 0px;">
              <div class="connect-widget">
                <ul class="connect-links">
          		<li id="connect-github">
          			<a href="https://github.com/PrismLibrary/Prism-Documentation/blob/master/docs/event-aggregator.md/#L1" target="_blank">
          				<div class="image github"></div>Edit on GitHub
          			</a>
                  </li>
                  <li id="connect-stack-overflow">
                      <a href="https://stackoverflow.com/questions/tagged/prism" target="_blank">
                          <div class="image stackoverflow"></div>Ask questions
                      </a>
                  </li>
                  <li id="connect-twitter">
                      <a href="https://twitter.com/prismlib" target="_blank">
                          <div class="image twitterhandle"></div>Follow @PrismLib
                      </a>
                  </li>
                  <li id="connect-twitter">
                      <a href="https://twitter.com/brianlagunas" target="_blank">
                          <div class="image twitterhandle"></div>Follow @BrianLagunas
                      </a>
                  </li>
                  <li id="connect-twitter">
                      <a href="https://twitter.com/danjsiegel" target="_blank">
                          <div class="image twitterhandle"></div>Follow @DanJSiegel
                      </a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright 2015-2024 Prism Software, LLC
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
